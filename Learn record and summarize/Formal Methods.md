# 命题逻辑

## 命题与联结词

- 命题是一个对事物作出确定判断的陈述语句。凡判断合理或与事实符合的陈述句称为真命题；而判断不合理或与事实部分不和陈述句称为假命题或假语句。一个命题具有两种可能的取值，为真或为假，它们称为命题的真值，分别用1和0来表示

- 用于表示确定命题的数学符号称为命题常元，用于表示不确定命题的数学符号称为命题变元

- 如果一个命题不可再进一步分割，则称其为原子命题或简单命题 

- 复合命题一个或几个原子命题通过联接词所构成的新命题， 是一个陈述句，其真值依赖于构成该命题的各原子命题的真值及联接词


- 非¬：一元联接词，对应自然言语中的“否定”。一个命题P加上非联接词就形成了一个新的命题，记作¬P
- 析取∨：二元联接词，对应自然言语中的”或“。两个命题P和Q通过析取联接词联系在一起，记作P∨Q
- 合取∧：二元联接词，对应自然言语中的”与“。两个命题P和Q通过合取联接词联系在一起，记作P∧Q
- 蕴涵→：二元联接词，对应自然言语中的”如果…则…“。两个命题P和Q通过蕴涵词联系在一起，记作P→Q，其中P称为前件（条件），Q称为后件（结论）。读作P蕴涵Q，或者如果P则Q，或者P是Q的充分条件，或者Q是P的必要条件。只有前件为真且后件为假时蕴含式才为假
- 双蕴涵↔：二元联接词，对应自然言语中的”当且仅当“。P当且仅当Q或P与Q等价
- 实际应用中，可以通过规定联接词的运算优先级来减少命题公式中圆括号的数量
- 一般地，¬，∧ ， ∨、→， ↔的优先级依次由强到弱，∧ 和 ∨之间没有优先级



## 命题公式

- 命题逻辑讨论的对象，是自然言语中命题的形式化描述，命题公式又称为命题语言，是由一些限定的符号遵循一定的规则所构成的符号串
- 如果公式A含有命题变元P1，P2，…Pn,则可将公式A记为A（P1,P2,…,Pn）,并称之为含有n个命题变元的公式
- 命题公式A(P1,P2,…,Pn)中变元P1,P2,….Pn的一组取值称为指派
  - 使公式A(P1,P2,…,Pn)取值为1的指派，称为真指派
  - 使公式A(P1,P2,…,Pn)取值为0的指派，称为假指派
- 对于公式A(P1,P2,…,Pn)，如果在任意指派下均取值为1，则称该公式为重言式或永真式。如果存在使得公式A(P1,P2,…,Pn)取值为1的指派，则称公式A是可满足的，否则称A为不可满足的或永假式
- 对于公式Ф和Ψ ，如果所有使Ф成真的指派必使Ψ成真，则称Ф蕴涵Ψ ，或者Ф永真蕴涵Ψ ，记作Ф ⇒ Ψ（ Ф |= Ψ ）
- 如果公式Ф和Ψ在任意指派下具有相同的真值，则称Ф和Ψ是等值的（语义）或等价的（语义），记作Ф =Ψ或者Ф = Ψ（ Ф ≡ Ψ ）
- Ф ⇒ Ψ当且仅当Ф → Ψ为永真式； Ф =||=Ψ当且仅当Ф ↔ Ψ为永真式：同时如果Ф ⇒ Ψ并且Ψ ⇒ Ф ，则Ф=||= Ψ 
- 对于公式Ф和Ψ ，如果Ф =||=Ψ ，且Ψ具有如下形式：C1∧C2∧…∧CM(C1 ∨C2…∨Cm)其中，Ci(i=1,2,…,m)具有形式L1 ∨L2 ∨…∨Ln(L1∧L2∧…∧Ln),Ci中的Lj（j=1,2,…m）为原子公式或原子公式的非，则称公式Ψ为公式Ф的合取（析取）范式，并称Ci为Ψ的子句，称Li为字句的文字
- P∧(P∨¬Q∨R)∧(¬p∨Q)，P∧Q∧(P∨¬Q)均是合取范式，P∨(P∧¬Q∧R)∨(¬p∧Q)，P∨Q∨(P∧¬Q)均是析取范式
- 对于公式Ф和Ψ ，如果Ψ是Ф的合取（析取）范式， Ψ的每一个子句包含公式Ф的所有原子公式（所有原子公式在各子句中只出现一次），且各个子句都不相同，则称公式Ψ为公式Ф的主合取（析取）范式，或者完全和取（析取）范式



## 自然演绎

- 定义 ：从前提出发，依照科学合理的推论规则，推出结论的过程

- 命题演算，实质上就是反复配合使用基本蕴涵公式，基本等值公式以及推理规则的过程

- 前提公式：Ф1 ,Ф2 ,…,Фn，结论公式：Ψ，记为矢列：Ф1 ,Ф2 ,…,Фn |-Ψ，如果能找到它的证明，称此矢列是有效的

- 当给出一组前提Ф1 ,Ф2 ,…,Фn时，需要推出结论Ψ ，相当于考察是否成立如下蕴涵公式：Ф1 ∧ Ф2,…∧ Фn ⇒ Ψ。
  - 如果上述蕴涵公式成立，那就意味着：当Ф1 ∧ Ф2,…∧ Фn为真时， Ψ必为真。否则，若Ψ为假，则(Ф1 ∧ Ф2,…∧ Фn )→Ψ为假，这与蕴涵公式的假设矛盾，所以，当上述蕴涵公式成立时，若Ф1 ,Ф2 ,…,Фn都为真，则必有Ψ为真。若上述蕴涵公式不成立，则称Ψ为谬误结论

- 自然演绎规则

  ![](https://raw.githubusercontent.com/CorneliusDeng/Markdown-Photos/main/Discrete%20Mathematics/equivalent%20calculation.png)



## 推理规则

- 前提引入规则：在推理过程中，可以根据需要随时引入前提
- 结论引入规则：在推理过程中所得到的中间结论，可作为后续推理的前提
- 置换规则：在推理过程中，命题公式中的部分公式都可以用其等值公式来置换
- 分离规则（假言推理规则）：已知A→B，A，则可得B
- 附加规则：已知A，则可附加B得到A∨B
- 化简规则：已知A∧B，则可得到A或得到B
- 反证规则（拒取式规则）： 已知A→B，¬B，则可得¬A
- 假言三段论规则：已知A→B，B→C，则可得A→C
- 析取三段论规则：已知A∨B，¬B，则可得A
- 构造性二难推理规则：已知A→B，C→D，A∨C，则可得B∨D
- 破坏性二难推理规则：已知A→B，C→D，¬B∨¬D，则可得¬A∨¬C
- 合取引入规则：已知A，B，则可得A∧B



## 逻辑等价

设Ф和Ψ是命题逻辑公式。当且仅当矢列Ф|-Ψ和Ψ |- Ф都是有效的,Ф和Ψ是逻辑等价，用Ф-||-Ψ表示



## 直接/间接证明

- **直接证明法**

  利用前提和等值公式，蕴涵公式的演绎证明

- **间接证明法**

  设有一组前提p1,p2,…pn，需要推出结论Q，即证明：P1∧P2,…∧Pn⇒Q，即证明：P1∧P2,…∧Pn→Q=1，即证明：¬(P1∧P2,…∧Pn) ∨Q=1，即证明：¬(¬(P1∧P2,…∧Pn) ∨Q)=0，即证明：P1∧P2,…∧Pn∧ ¬Q=0

  ⇒要证明P1,P2,…Pn├Q,可把结论Q的否定¬Q加入到前提中去，然后再证明P1∧P2,…∧Pn∧ ¬Q为永假式即可。这种证明法也叫间接证明法。

- **归纳推理法** 

  是一种间接证明法，为了证明A├B，从A∧¬B出发将A∧¬B转化为等价的合取范式，并以合取范式中的所有子句构成的集合S（子句集）为基础，进行子句的归结（消去互补对，即字句¬P∨¬Q和P∨R可得归结式¬Q∨R并将该归结式放入S中），重复归结过程直至归结出矛盾式



## 命题逻辑语义/有效性/合理性

- **命题逻辑的语义**

  语义可以简单地看作是数据所对应的现实世界中的事物所代表的概念的含义，以及这些含义之间的关系，是数据在某个领域上的解释和逻辑表示。

  - 语义推导关系 Ф1 ,Ф2 ,…,Фn |= Ψ
    - 命题公式Ф1 ,Ф2 ,…,Фn 都指派为真的指派， Ψ也指派为真

- **命题逻辑的合理性**

  设Ф1 ,Ф2 ,…,Фn 和Ψ是命题逻辑公式。若Ф1 ,Ф2 ,…,Фn |-Ψ是有效的，则Ф1 ,Ф2 ,…,Фn |=Ψ成立。即语法（逻辑）推导成立，则语义推导成立

- **命题逻辑的完备性**

  只要Ф1 ,Ф2 ,…,Фn |=Ψ成立，都存在矢列Ф1 ,Ф2 ,…,Фn |-Ψ的一个自然演绎证明。即语义成立，语法成立



## 范式

怎样确定Ф1 ,Ф2 ,…,Фn |=Ψ？

通过语义上转化公式为“等价的”公式，然后在纯粹语义和算法含义上讨论

对于公式Ф和Ψ ，如果Ф =||=Ψ ，且Ψ具有如下形式：C1∧C2∧…∧CM其中，ci(i=1,2,…,m)具有形式L1 ∨L2 ∨…∨Ln,ci中的Lj（j=1,2,…m）为原子公式或原子公式的非，则称公式Ψ为公式Ф的合取范式（CNF），并称Ci为Ψ的子句，称Li为子句的文字

- **引理**

  文字的析取L1 ∨L2 ∨…∨Lm是有效的当且仅当存在1≦i,j≦m，使得Li是¬Lj

- **快速判断|=Ф有效性的方法**

  如果Ф是CNF式，检查Ф的所有合取Ψk,寻找Ψk中是否有这样的原子，即它们的否定也在Ψk。如果所有的析取都能找到这个样的匹配，那么就有|=Ф

- **等价的CNF的转化方法**

  - 根据Ф的真值表：真值表中赋值为0的行构造一个文字的析取（文字恰好是真值表中那一行句法的相反）
  - 等价转化算法
    - 将Ф中的具有形式消去Ф中的蕴涵联接词Ψ→η用¬Ψ∨η替代
    - 消去Ф中的蕴涵联接词将¬ Ф转化为只包含原子否定的等价公式
    - 通过前两步处理完毕的公式输入CNF算法，CNF算法输出一个等价的CNF公式。



# 谓词逻辑

## 基本概念

谓词逻辑，对命题逻辑中的原子命题进行了进一步的分解和细化，通过引入谓词，函词，量词，弥补了自然语言逻辑推理不精确的缺陷。

- **个体域**

  - 任何科学理论都有它的研究对象，这些研究对象构成的一个非空集合称为论域或个体域，以D表示
  - 论域或者个体域中的任一元素称为个体
  - 命题描述个体的部分称为个体词
  - 个体词可以为个体域中的某一确定的个体，也可以泛指个体域中任意元素，前者称为个体常元，后者称为个体变元或者个体变量。一般，个体变量用小写字母表示。

- **函词**

  - 又称为函数，是个体域到个体域上的映射，用小写字母表示 。eg. m(x):x的母亲
  - 函词以一个或一个以上个体变元为变量，包含有一个（n个）个体变元的函词，称为一元（n元）函词。eg. f(x1,x2,…,xn)

- **谓词**

  - 命题中描述个体的特征及个体之间关系的部分称为谓词，以大写字母表示。
  - 对于确定的谓词的符号表示称为谓词常元，否则，称为谓词变元
  - 谓词和个体的结合使用构成命题，一个谓词中可以有一个或者一个以上个体或者函词
  - 对应于含有n个个体函词的谓词称为n元谓词，以P(.,.,…,.)表示
  - 一般地，一元谓词表述了个体的性质，多元谓词表述了个体之间的关系。eg. H(x):x是人；L(x,y)：x>y
  - 注意：谓词不是命题，只有当确定的个体词或者函词“填入”后，才成为命题，一元谓词需要填入一个个体词或函词，n元谓词需要填入n个个体词或函词后才成为命题。对于已有确定真假值的命题可看作为0元谓词。

- **谓词和函词的区别**

  - 函词中的个体变元用个体带入后的结果依然是个体。eg. m(a)=小王的母亲
  - 谓词中的个体变元用确定的个体带入后就变成了命题。eg. M(x)：x是人；M(a)：小王是人
  - 函词是论域到论域的映射，f:D→D
  - 谓词是论域到{T,F}的映射，M:D →{T,F}

- **项**

  - 项是由个体常量，变量和作用其上的函数构成
  - 个体常量是项，个体变元是项
  - 如果f是一个n(n≧1)元函词，其t1, t2,…, tn是项，则f(t1, t2,…, tn)是项

- **量词**

  - 用来表示个体数量的词称为量词，也可看为对个体词所加的限制，约束的词

  - 量词包括存在量词和全称量词

    - 存在量词表示至少存在论域中的一个个体，用“∃x”来表示

    - 全称量词表示论域中的所有，以“∀x“表示

      

## 谓词公式

- **命题函数**
  - 填入个体变元或者函词后的谓词，称为命题函数，如P(x),Q(x,y,z)以及包含有二元函词f(y,z)的P(x,f(y,z),w)
- **原子公式**
  - 若P是一个n元谓词，且t1, tn,…, tn是项，则P(t1, t2,…, tn)是原子
  - 命题词也是原子（n=0）
- **谓词合适公式**
  - 原子命题（命题常元或者命题变元），原子公式是合适公式
  - 如果A,B是合适公式，那么¬A， (A ∧B)、(A ∨ B)、(A → B) 和 (A ↔ B) 是合适公式
  - 如果A是合适公式，x是A中出现的变量（个体变元），则∀xA，∃xA也是合适公式
  - 当且仅当有限次地使用（1）（2）（3）所组成的符号串是合适公式
- **命题符号化**
  - 谓词逻辑比较复杂，命题的符号表达式与论域有关
  - eg1.不是所有的鸟都可以飞翔
    - B(x):x是一只鸟，F(x)：x可以飞翔
    - ¬(∀x B(x)→F(x)）或 ∃x(B(x)∧¬F(x))
  - eg2.每个孩子都比其母亲年轻
    - C(x)：x是一个小孩，m(x)：x的母亲，Y(x,y):x比y年轻
    - ∀x(C(x)→Y(x,m(x)))
  - eg3.所有的大学生都喜欢一些歌星
    - S(x)：x是大学生，X(x)：x是歌星，L(x,y):x喜欢y
    - ∀x(S(x)→∃y(X(y)∧L(x,y)))

## 谓词逻辑应用

- **开关切换系统** 
  - 考察一个切换开关的状态的谓词逻辑描述问题
  - 在不同的时刻开关只能处于“开“或者”关“的状态，并且在某一确定时刻只能处于其中的一种状态
    - switch_on(x):表示在时刻x开关处于”开”的状态
    - switch_off(x)表示在时刻x开关处于和“关”的状态
    - 个体变元x对应于离散的时间
    - 假定论域为一个自然数集合
  - 用谓词on(x,y)表示开关在时刻x,x+1,…,y-1都处于“开”态。谓词off(x,y)表示开关在时刻x,x+1,…,y-1都处于“关”状态，谓词lessthan(x,y)表示x小于y
    - On(x,y) ↔switch_on(x)∧¬(∃z)(lessthan(x,z)∧lessthan(z,y)∧switch_off(z)
    - off(x,y) ↔switch_off(x)∧¬(∃z)(lessthan(x,z)∧lessthan(z,y)∧switch_on(z)
  - 若开关在时刻y处于开（关）状态，而在此之前处于同样的状态的时刻为x，则在x与y之间的所有时刻，开关都一直处于关（开）状态
    - ∀x∀y(switch_on(x)∧switch_on(y)∧lessthan(x,y))∧¬∃z.(switch_on(z)∧lessthan(x,z)∧lessthan(z,y)) ⇒off(x+1,y)
    - ∀x∀y(switch_off(x)∧switch_off(y)∧lessthan(x,y))∧¬∃z.(switch_off(z)∧lessthan(x,z)∧lessthan(z,y)) ⇒on(x+1,y)
  - 用谓词from_off_to_on(u1,v2)表示在u1时刻处于关状态，在v2时刻处于开状态。
    - 其中u1<v2,并且在时刻u1,u1+1,…,v2-1开关一直保持关状态；
    - 或者对于间隔（u1,v2）中的每一时刻，当开关出现开状态后，下一个状态一定为关。
  - 谓词off_on(u1,v2)表示每次开关出现开状态后，下一个状态一定为关;
    谓词on_off(u1,v2) 表示每次开关出现关状态后，下一个状态一定为开；那么
    - Off_on(u1,v2) ↔∃v1. ∃u2(lessthan(u1,v1)∧lessthan(v1,u2)∧lessthan(u2,v2)∧off(u1,v1)∧off(u2,v2)∧on_off(v1,u2)
    - on_off(v1,u3) ↔∃u2. ∃v2.(lessthan(v1,u2)∧lessthan(u2,v2)∧lessthan(v2,u3)∧on(v1,u1)∧on(v2,u3)∧off_on(u2,v2)
    - from_off_to_on(x,y) ↔switch_on(y)∧(off(x,y)∨off_on(x,y));	from_on_to_off(x,y) ↔switch_off(y)∧(on(x,y)∨on_off(x,y))
- **文件操作系统**
  - 考察由记录（Record）的线性序列所组成文件的操作问题
    - 文件中的记录从零开始顺序编号，即，file0,file1,…filek-1是任意一个文件的k个记录。其中fliej（0≤j≤k-1）表示文件的第j个记录
    - 如果k<1，则文件为空。编辑人员可以通过插入，删除和替换来对文件进行修改
  - 如果S(x)是一个关于x的不变的条件，x’表示操作后更新的变量x，S(x’)表述了在操作后状态的不变性
    - 设Position：当前的指针位置，表示了两个相邻记录之间的位置，LP：在position的左边的记录序列，RP：在position的右边的记录序列，Length：文件中的记录数。
    - 位置不变性S(position):0≤position≤length，任意操作对position进行作用后，S(position’)恒为真。
  - 文件操作：		
    - EMPTY_FILE    Position=0∧length=0
    - MOVE_LEFT    指针移动到前一个记录的左端；对于空文件，该操作无效果；
      - 前置条件：position>0
      - 后置条件：(position’=position-1)∧(length’=length)∧(file’=file)
    - MOVE_RIGHT  指针移动到下一个记录的右端；如果当前指针已经在最后一个记录的右端，则该操作不产生影响；
      - 前置条件：position<length
      - 后置条件：(position’=position+1)∧(length’=length)∧(file’=file)
    - INSERT_RIGHT  在文件中插入一个新记录r，从而在新位置左端的记录序列为{LP},右端的记录序列为{r,RP};
      - 后置条件：(position’=position)∧(length’=length+1)∧(∀p)((0≤p<position) → filep’= filep ∧(p=position) → filep’=r∧(position<p<length) → filep+1’= filep
    - INSERT_LEFT  在文件中插入一个新记录r，从而在新位置左端的记录序列为{LP,r},右端的记录序列为{RP};
      - 前置条件：position≧0
      - 后置条件：(position’=position+1)∧(length’=length+1)∧(∀p)((0≤p<position) → filep’= filep∧(p=position) →file’p=r∧(position<p<length) → filep+1’= filep
    - DELETE_LEFT 删除指针左边的记录r；如果当前指针在第一个记录的左端，或者文件为空，则操作不产生影响；
      - 前置条件：前置条件  position≧0
      - 后置条件：(position’=position-1)   ∧(length’=length-1)    ∧ (∀p) ((0≤p<position) → filep ’= filep ∧(position’≤p<length’) → filep ’= filep＋1 )
    - DELETE_RIGHT  删除指针右边的记录r；如果当前指针在第一个记录的右端，或者文件为空，则操作不产生影响；
      - 前置条件： 0≤position<lenght
      - 后置条件：(position’=position)   ∧(length’=length-1)   ∧(∀p)((0≤p<position) → filep’= filep∧(position’≤p<length’) → filep’= filep+1) 
- **有向图的可达性分析**
  - 有向图是一个二元组（V,E），V:一个有限顶点集合，E:一个有限有向边集合
  - 定义谓词
    - 对每个顶点v∈V，谓词vertex(v)为真
    - 对每条边e∈E，谓词edge(e)为真
    - first(x,e)和second(y,e)：边e是从顶点x到顶点y
    - path(x,y)：存在一条从顶点x到顶点y的路径
  - 顶点和边的规格 
    - ∀x(vertex(x)∨edge(x))
    - ∀x¬(vertex(x)∧edge(x))
    - ∀e(edge(e) →(∃x)(∃y)(vertex(x)∧vertex(y)∧first(x,e)∧second(y, e))
  - 路径
    - ∀x∀y∃e(first(x,e)∧second(y,e) →path(x,y))
    - ∀x∀y∃z(path(x,z)∧path(z,y) →path(x,y))
  - 可达性
    - ∀x：R.p表示对集合R中的任何元素，属于p为真；∃x：R.p表示集合R中的存在一个元素，使得属性p为真 
    - ∀v1,v2:V.(path(v1,v2)∧path(v2,v1))，该图为强连通图
    - ∃v1,v2:V.(path(v1,v2)∨path(v2,v1))，该图为非强连通图

## 谓词逻辑演算

## 谓词逻辑语义

## 谓词逻辑的不可判断性